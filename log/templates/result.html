{% extends "base.html" %}

{% block header %}
    <script type="text/javascript">
        function save_click() {
            var outcome = document.getElementById('edit_outcome').value;
            var outcome_category = document.getElementById('edit_outcome_category').value;
            $.post('', {'save': true, 'outcome': outcome, 'outcome_category': outcome_category, 'csrfmiddlewaretoken': '{{ csrf_token }}'});
            setTimeout(function () {
                window.location.reload();
            }, 500);
        }
        function delete_click() {
            var conf = confirm('Are you sure you want to delete this result?');
            if (conf) {
                $.post('', {'delete': true, 'csrfmiddlewaretoken': '{{ csrf_token }}'});
                setTimeout(function () {
                    window.location.assign('../results');
                }, 500);
            }
        }
    </script>
{% endblock %}

{% block body %}
    {% load django_tables2 %}
    <div class="source">
        <h2 align="center">
            <a name="result"></a>
            Result
        </h2>
        <div align="center">
            {% render_table table %}
        </div>
        <div class="section">
            <h3 align="center">
                <a name="injections"></a>
                Injections
            </h3>
            <div align="center">
                {% render_table injection_table %}
            </div>
            <h3 align="center">
                <a name="injections"></a>
                Events
            </h3>
            <div align="center">
                {% render_table event_table %}
            </div>
            {% if output_image %}
                <h3 align="center">
                    <a name="output_image"></a>
                    Output Image
                </h3>
                <div align="center">
                    <img src="../output/{{ result.id }}">
                </div>
            {% endif %}
            <h3 align="center">
                <a name="dut_output"></a>
                DUT Output
            </h3>
            <code class="console">{{ result.dut_output }}</code>
            {% if campaign_data.aux %}
                <h3 align="center">
                    <a name="aux_output"></a>
                    AUX Output
                </h3>
                <code class="console">{{ result.aux_output }}</code>
            {% endif %}
            <h3 align="center">
                <a name="debugger_output"></a>
                Debugger Output
            </h3>
            <code class="console">{{ result.debugger_output }}</code>
            {% if campaign_data.simics %}
                <div class="section" align="center">
                    <h3>
                        <a name="register_diffs"></a>
                        Register Diffs
                    </h3>
                    {% render_table register_table %}
                </div>
                <div class="section" align="center">
                    <h3>
                        <a name="memory_diffs"></a>
                        Memory Diffs
                    </h3>
                    {% render_table memory_table %}
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}
