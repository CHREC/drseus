{% extends "base.html" %}

{% block body %}
    <section class="content-header">
        <h1>Charts ({% if categories %}Grouped by Category{% else %}Grouped by Outcome{% endif %})</h1>
        <ol class="breadcrumb">
            <li><a href="/">Campaigns</a></li>
            <li><a href="info">Campaign {{ campaign.id }}</a></li>
            <li class="active"><a href="">Charts</a></li>
        </ol>
    </section>

    <section class="content">
        <div class="row">
            {% for chart, name in chart_list %}
                <a name="{{ chart }}"></a>
                <div class="col-lg-6 col-md-6">
                    <div class="box">
                        <div class="box-header">
                            <h3 class="box-title">{{ name }}</h3>
                            <div class="box-tools pull-right">
                                <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                <button class="btn btn-box-tool expand"><i class="fa fa-expand"></i></button>
                                <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                            </div>
                        </div>
                        <div class="box-body">
                            <div id="{{ chart }}" class="chart-container"></div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </section>
{% endblock %}

{% block sidebar_block %}
    <li class="header">OPTIONS</li>
    {% if categories %}
        <li>
            <a href="javascript:{}" onclick="group_charts(false)">
                <i class="fa fa-cog"></i>
                <span>Group by Outcome</span>
            </a>
        </li>
    {% else %}
        <li>
            <a href="javascript:{}" onclick="group_charts(true)">
                <i class="fa fa-cog"></i>
                <span>Group by Category</span>
            </a>
        </li>
    {% endif %}
{% endblock %}

{% block script %}
    <script>
        $('#charts-campaign-link').addClass('active')

        function group_charts(group_categories) {
            if (group_categories) {
                window.location.assign(window.location.href.replace('/outcome_charts', '/category_charts'));
            } else {
                window.location.assign(window.location.href.replace('/category_charts', '/outcome_charts'));
            }
        }
    </script>
{% endblock %}
